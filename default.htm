<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
        <title>OkaloosaGIS Map Viewer</title>
        <link rel="stylesheet" type="text/css" href="//js.arcgis.com/3.11compact/esri/css/esri.css">
        <link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
        <link rel="stylesheet" type="text/css" href="css/theme/dbootstrap/dbootstrap.css">
        <link rel="stylesheet" type="text/css" href="css/main.css">

    </head>
    <body class="dbootstrap">

        <div class="appHeader">
            <div class="headerLogo">
                <img alt="logo" src="images/oc_logo_shark.png" height="28" />
            </div>
            <div class="headerTitle" style="font-family: Papyrus,Pristina,Vivaldi,Gigi,Gabriola,Chiller,Broadway, Batang,Calibri,Verdana, sans-serif;">
                <span id="headerTitleSpan" >Okaloosa County IS/GIS</span>
                <!--<div id="subHeaderTitleSpan" class="subHeaderTitle">WebGIS</div>-->
            </div>
            <!--
            <div class="search">
                <div id='geocodeDijit'>
                </div>
            </div>
            -->
            <div class="search">
                <div id='navtoolsDijit'>
                </div>
            </div>

            <div class="headerLinks">
                <div id="helpDijit">
                </div>
            </div>

        </div>


<!--
        <div id="waitdiv" style="position:absolute;left:60%;top:50%;visibility:visible;z-index:999">
             <img id="wimg" src="images/ajax-loader1.gif" width="32" height="16" alt="">
        </div>
-->

        <script type="text/javascript">

            /*
            DOJO LOADER http://dojotoolkit.org/reference-guide/1.8/loader/amd.html
            http://dojotoolkit.org/documentation/tutorials/1.9/modules_advanced/
            http://blog.redfin.com/devblog/2012/12/dojo_phased_javascript_loading.html#.VNFHP2PVvYA
            http://www.speich.net/articles/category/javascript/
            http://www.maratbn.com/blogs/2011/04/27/jquery-dojo-together/
            */

            var dojoConfig = {
                async: true,
                tlmSiblingOfDojo: false,
                parseOnLoad: false,
                packages: [{
                    name: 'viewer',
                    location: location.pathname.replace(/[^\/]+$/, '') + 'js/viewer'
                },{
                    name: 'config',
                    location: location.pathname.replace(/[^\/]+$/, '') + 'js/config'
                },{
                    name: 'gis',
                    location: location.pathname.replace(/[^\/]+$/, '') + 'js/gis'
                },
                //https://www.ibm.com/developerworks/community/blogs/94e7fded-7162-445e-8ceb-97a2140866a9/entry/loading_jquery_with_dojo_1_7_amd_loader2?lang=en

                { name: 'jquery', location: 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.1',
                     main: 'jquery' }

                ]
            };
        </script>
        <!--[if lt IE 9]>
            <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/es5-shim/4.0.3/es5-shim.min.js"></script>
        <![endif]-->
        <script type="text/javascript" src="//js.arcgis.com/3.11compact/"></script>
        <script type="text/javascript">
            // get the config file from the url if present
            var file = 'config/viewer', s = window.location.search, q = s.match(/config=([^&]*)/i);
            if (q && q.length > 0) {
                file = q[1];
                if(file.indexOf('/') < 0) {
                    file = 'config/' + file;
                }
            }
            require(['viewer/Controller', file], function(Controller, config){
                Controller.startup(config);
            });
        </script>
    </body>
</html>
